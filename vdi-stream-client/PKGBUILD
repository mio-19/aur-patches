# Maintainer: Maik Broemme <mbroemme@libmpq.org>
pkgname="vdi-stream-client"
pkgdesc="A tiny and low latency desktop streaming client for remote Windows guests with GPU passthrough"
pkgver="0.2.0"
pkgrel="1"
arch=("x86_64" "aarch64")
url="https://libmpq.org/"
license=("GPL")
depends=("sdl2" "sdl2_ttf" "usbredir")
source=(
  "https://github.com/mbroemme/${pkgname}/releases/download/v${pkgver}/${pkgname}-${pkgver}.tar.gz"
  "https://github.com/parsec-cloud/parsec-sdk/archive/master.tar.gz"
)
sha256sums=('d4535e67a730c3e646a031557070f12cd23ae2dc63006841561ecc8935b45382'
            '8418246e2bf1486775bd4e785ba6c6c1dcf0ff91661f862857f35cca17370d8e')

prepare() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  mv ../parsec-sdk-master parsec-sdk
}

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --prefix=/usr
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
